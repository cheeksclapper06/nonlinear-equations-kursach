<!DOCTYPE html>
<html>
<head>
    <title>Desmos Graph</title>
    <script src="https://www.desmos.com/api/v1.9/calculator.js"></script>
    <style>
        /* Basic styling to make the calculator fill the entire div */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        #calculator {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div id="calculator"></div>

<script>
    var elt = document.getElementById('calculator');
    // Initialize the Desmos Graphing Calculator
    var calculator = Desmos.GraphingCalculator(elt, {
        // Optional: Customize calculator settings
        expressionsCollapsed: true, // Hide the expressions list by default
        zoomButtons: true,        // Show zoom in/out buttons
        keypad: false             // Hide the on-screen keypad
    });

    // Add an event listener to receive messages from the C# host application
    window.chrome.webview.addEventListener('message', event => {
        var data = event.data; // The data sent from C#

        // Check if the message type is for plotting an equation
        if (data.type === 'plotEquation') {
            // Set the expression in Desmos
            // 'id' is a unique identifier for the expression
            // 'latex' is the mathematical expression in LaTeX format
            calculator.setExpression({ id: 'graph1', latex: data.equation });

            // You can also programmatically set the viewport if needed
            // calculator.setMathBounds({
            //     left: -10,
            //     right: 10,
            //     bottom: -10,
            //     top: 10
            // });
        }
    });
</script>
</body>
</html>